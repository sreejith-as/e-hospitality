{% extends "doctors/base_dashboard.html" %}

{% block title %}Appointment Schedule{% endblock %}

{% block patients_content %}
<div class="container py-4">
  <h2>My Appointments</h2>
  
  {% if appointments %}
  <table class="table table-striped table-hover align-middle">
    <thead>
      <tr>
        <th>Patient</th>
        <th>Date</th>
        <th>Time</th>
        <th>Reason</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for appointment in appointments %}
      <tr>
        <td>{{ appointment.patient.get_full_name }}</td>
        <td>{{ appointment.schedule.date }}</td>
        <td>{{ appointment.schedule.start_time|time:"h:i A" }}</td>
        <td>{{ appointment.symptoms|default:"N/A" }}</td>
        <td>
          {% if appointment.status == 'booked' %}
            <span class="badge bg-primary text-uppercase">scheduled</span>
          {% elif appointment.status == 'completed' %}
            <span class="badge bg-success text-uppercase">completed</span>
          {% else %}
            <span class="badge bg-secondary text-uppercase">{{ appointment.status }}</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'doctors:appointment_details' appointment.id %}" class="btn btn-primary btn-sm">View Details</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No appointments scheduled.</p>
  {% endif %}
  
  <a href="{% url 'doctors:dashboard' %}#appointments" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}

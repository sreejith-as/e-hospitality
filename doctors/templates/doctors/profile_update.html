{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container py-3, 5">
  <div class="row justify-content-center">
    <div class="col-lg-8">

      <!-- Page Title -->
      <div class="d-flex align-items-center mb-4">
        <i class="bi bi-person-circle text-primary me-2" style="font-size: 1.75rem;"></i>
        <h2 class="mb-0 text-primary">Update Profile</h2>
      </div>

      <!-- Profile Form -->
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <!-- Personal Info Card -->
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-header bg-light">
            <h5 class="mb-0"><i class="bi bi-person-fill me-1 text-primary"></i> Personal Information</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="{{ form.first_name.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-person me-1 text-muted"></i>
                  {{ form.first_name.label }}
                </label>
                {{ form.first_name }}
                {% if form.first_name.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.first_name.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ form.last_name.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-person me-1 text-muted"></i>
                  {{ form.last_name.label }}
                </label>
                {{ form.last_name }}
                {% if form.last_name.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.last_name.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ form.email.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-envelope me-1 text-muted"></i>
                  {{ form.email.label }}
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.email.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ form.phone_number.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-telephone me-1 text-muted"></i>
                  {{ form.phone_number.label }}
                </label>
                {{ form.phone_number }}
                {% if form.phone_number.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.phone_number.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ form.gender.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-gender-ambiguous me-1 text-muted"></i>
                  {{ form.gender.label }}
                </label>
                {{ form.gender }}
                {% if form.gender.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.gender.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ form.department.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-building me-1 text-muted"></i>
                  {{ form.department.label }}
                </label>
                {{ form.department }}
                {% if form.department.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.department.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-12">
                <label for="{{ form.profile_picture.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-image me-1 text-muted"></i>
                  Profile Picture
                </label>
                {{ form.profile_picture }}
                {% if form.profile_picture.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ form.profile_picture.errors.0 }}</div>
                {% endif %}
                {% if doctor.profile_picture %}
                  <img src="{{ doctor.profile_picture.url }}" alt="Current Profile Picture" class="img-fluid mt-2" style="max-width: 150px;">
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Working Hours Card -->
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-header bg-light">
            <h5 class="mb-0"><i class="bi bi-clock me-1 text-success"></i> Working Days & Hours</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-12">
                <label for="{{ availability_form.working_days.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-calendar-week me-1 text-muted"></i>
                  {{ availability_form.working_days.label }}
                </label>
                {{ availability_form.working_days }}
                {% if availability_form.working_days.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ availability_form.working_days.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ availability_form.start_time.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-clock-start me-1 text-muted"></i>
                  {{ availability_form.start_time.label }}
                </label>
                {{ availability_form.start_time }}
                {% if availability_form.start_time.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ availability_form.start_time.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="col-md-6">
                <label for="{{ availability_form.end_time.id_for_label }}" class="form-label fw-semibold">
                  <i class="bi bi-clock-fill me-1 text-muted"></i>
                  {{ availability_form.end_time.label }}
                </label>
                {{ availability_form.end_time }}
                {% if availability_form.end_time.errors %}
                  <div class="text-danger small mt-1"><i class="bi bi-exclamation-circle"></i> {{ availability_form.end_time.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary px-4">
            <i class="bi bi-save me-1"></i> Update Profile
          </button>
          <a href="#" onclick="history.back()" class="btn btn-outline-secondary px-4">
            <i class="bi bi-x-circle me-1"></i> Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Optional: Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
{% endblock %}
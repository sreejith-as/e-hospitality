{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-4">
  <h2>Appointment Details</h2>
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">Patient: {{ appointment.patient.get_full_name }}</h5>
      <p class="card-text"><strong>Date:</strong> {{ appointment.schedule.date }}</p>
      <p class="card-text"><strong>Time:</strong> {{ appointment.schedule.start_time|time:"h:i A" }}</p>
      <p class="card-text"><strong>Symptoms:</strong> {{ appointment.symptoms|default:"N/A" }}</p>
      <p class="card-text"><strong>Status:</strong> {{ appointment.status }}</p>
    </div>
  </div>

  <h3>Add Diagnosis and Prescription</h3>
  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="add_diagnosis_and_prescription">
    <div class="mb-3">
      <label for="diagnosis_note" class="form-label">Diagnosis Note</label>
      <textarea class="form-control" id="diagnosis_note" name="diagnosis_note" rows="4" required></textarea>
    </div>
    
    <div class="mb-3">
      <label for="medicine_name" class="form-label">Medicine Name</label>
      <input type="text" class="form-control" id="medicine_name" name="medicine_name" required>
    </div>
    <div class="mb-3">
      <label for="dosage" class="form-label">Dosage</label>
      <input type="text" class="form-control" id="dosage" name="dosage" required>
    </div>
    <div class="mb-3">
      <label for="instructions" class="form-label">Instructions</label>
      <textarea class="form-control" id="instructions" name="instructions" rows="3"></textarea>
    </div>
    
    <button type="submit" class="btn btn-primary">Add Diagnosis and Prescription</button>
    <a href="{% url 'doctors:dashboard' %}#appointments" class="btn btn-secondary">Back to Dashboard</a>
  </form>
</div>
{% endblock %}
